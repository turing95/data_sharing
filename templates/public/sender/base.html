{% extends 'public/_base.html' %}
{% load i18n %}
{% load l10n %}
{% load static %}
{% load custom_tags %}

{% block public_content %}

    <!-- Top Bar -->
    <div class="p-1 bg-gray-100">
        <div class="flex justify-center max-w-4xl mx-auto">
            {% if sender %}
                <p class="pr-3 text-xs text-gray-700">
                    <strong>{% translate 'Accessing as:' %}</strong> {{ sender.email }}</p>
            {% else %}
                <p class="pr-3 text-xs text-gray-700"><strong>{% translate 'Accessing via public link' %}</strong></p>
            {% endif %}
            <p class="text-xs text-gray-700"><strong>{% translate 'Invited by:' %}</strong> {{ space.user.email }}</p>
        </div>
    </div>
    <!-- Title Bar  -->
    <div class="bg-center bg-cover h-25 bg-marian-blue-200">
        <div class="flex-col max-w-4xl px-10 mx-auto">
            <div class="flex flex-wrap items-center justify-between h-full max-w-screen-xl">
                <!-- company logo-->
                <a href="{% url 'generic_home' %}" class="flex items-center space-x-3 rtl:space-x-reverse">
                    <img src="{% static 'images/logo.png' %}" alt="logo" class="w-[120px] mt-2">
                </a>
                {% if not request.user.is_authenticated %}
                    <div class="flex space-x-3 md:order-2 md:space-x-0 rtl:space-x-reverse">
                        <div class="justify-end md:me-0 md:inline-flex">
                            {% include 'components/language_selector.html' %}
                        </div>
                    </div>
                {% endif %}

            </div>
            <label for="{{ space.title.id_for_label }}"
                   class="block pt-3 text-xs font-bold text-gray-900 dark:text-white">{% translate 'Upload Space' %}</label>
            <h1 class="pb-3 text-3xl font-bold text-black">{{ space.title }}</h1>
        </div>

    </div>
    {% include "components/tabs_menu.html" with tabs_data=sender_tab  pk=sender.pk pk_1=space.pk %}
    {% block sender_content %}
        <div class="w-full max-w-4xl px-10 pb-2 mx-auto">

            <!-- Instructions Section -->
            {% if space.instructions %}
                <div class="mt-3">
                    <p class="text-sm">{{ space.instructions|linebreaks }}</p>
                </div>
            {% endif %}

            {% if space.deadline %}
                <!-- Deadline -->
                <div class="mt-4 mb-2 mb-4 text-base">
                    <span class="">{% translate 'Deadline:' %}</span>
                    {% localize on %}
                        <span class="inline-flex items-center bg-blue-100 text-blue-800 text-xs font-semibold px-2.5 py-0.5">
                    <img src="{% static 'images/icons/calendar-blue.svg' %}" alt="clock icon"
                         class="w-[13px] h-[13px] mr-1">
                    {{ space.deadline|date }} 
                </span>
                        <span class="inline-flex items-center bg-blue-100 text-blue-800 text-xs font-semibold px-2.5 py-0.5 ml-2">
                    <img src="{% static 'images/icons/clock-blue.svg' %}" alt="clock icon"
                         class="w-[13px] h-[13px] mr-1">
                    {{ space.deadline|time }} {{ space.deadline|date:"T" }}
                </span>

                    {% endlocalize %}
                    {% if space.deadline_expired %}
                        <span class="inline-flex items-center  bg-red-100 text-red-800 text-xs font-semibold px-2.5 py-0.5 ml-2">
                        {% translate 'Deadline expired!' %}
                    </span>
                    {% else %}
                        {% if space.upload_after_deadline is False %}
                            <span class="inline-flex items-center text-blue-800 text-xs font-semibold px-2.5 py-0.5 ml-2">
                            {% translate 'You will not be able to upload files after the deadline.' %}
                    </span>
                        {% endif %}
                    {% endif %}


                </div>
                {% if space.upload_after_deadline is False and space.deadline_expired %}

                    <!-- Deadline Expired Message -->
                    <div class="flex items-center justify-center w-4/5 mx-auto my-8">
                        <div class="p-4 text-center bg-red-100 border border-red-300 shadow-lg">
                            <h2 class="mt-2 text-xl font-bold text-red-800">{% translate 'Deadline Expired' %}</h2>
                            <p class="mt-2 text-red-700 text-md">
                                {% translate 'It is not possible to upload files anymore. For any inquiries, contact:' %}<br>
                                <a
                                        href="mailto:{{ space.user.email }}"
                                        class="text-blue-500 underline">{{ space.user.email }}</a>
                            </p>
                        </div>
                    </div>
                {% endif %}
            {% endif %}
        </div>
    {% endblock sender_content %}
    <!-- Main Content -->


{% endblock %}
