{% extends "private/_base.html" %}
{% load static i18n %}
{% block private_content %}
    {% include 'private/request/request_form.html' with form=form %}

    {% url 'upload_request_create' kezyy_request.pk as upload_request_create_url %}
    {% translate 'Add file request' as button_text %}
    {% include "components/buttons/generic.html" with button_text=button_text extra_classes="my-2" hx_get=upload_request_create_url hx_target="#requests-container" hx_swap="beforeend" %}
    {% url 'text_request_create' kezyy_request.pk as text_request_create_url %}
    {% translate 'Add text request' as button_text %}
    {% include "components/buttons/generic.html" with button_text=button_text extra_classes="my-2" hx_get=text_request_create_url hx_target="#requests-container" hx_swap="beforeend" %}
    <form id="requests-container"
          class="sortable"
          hx-post="{% url 'request_update_order' kezyy_request.pk %}"
          hx-indicator="#loading-indicator-sort"
          hx-trigger="end"
          data-accordion="collapse"
    >
        {% csrf_token %}
        {% block sorted_requests %}
            {% include 'components/custom_htmx_indicator.html' with loader_id='loading-indicator-sort' %}

            {% for input_request in kezyy_request.input_requests_position_sorted %}
                {% include 'private/request/input_request.html' with input_request=input_request %}

            {% endfor %}
        {% endblock sorted_requests %}

    </form>
    {% comment %}
    <form id="requests-container" class="sortable" hx-post="{% url 'request_update_order' kezyy_request.pk %}"
          hx-trigger="end from:document">
        {% csrf_token %}
        {% for input_request in kezyy_request.input_requests_position_sorted %}
            <div>
                {{ input_request.pk }}
            </div>

        {% endfor %}


    </form>
{% endcomment %}
{% endblock %}
