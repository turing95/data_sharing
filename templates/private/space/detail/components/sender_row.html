{% load custom_tags static %}
<tr class=" border-b dark:bg-gray-800 dark:border-gray-700 {% if sender.is_active is False %} bg-orange-100 {%else%} bg-white{% endif %}" hx-target="this">
                <th scope="row" class="sticky left-0 z-10 max-w-xs px-3 py-2 font-medium text-gray-900 break-words whitespace-normal {% if sender.is_active is False %} bg-orange-100 {%else%} bg-white{% endif %} dark:text-white">
                    {{ sender.email }}
                </th>
                {% url 'sender_space_detail_private' space.uuid sender.uuid as sender_path%}
                <td class="px-3 py-2">
                    <div class="inline-flex items-center">
                        <a href="{{ sender_path}}" target = "_blank" class="text-blue-600 underline transition-colors duration-300 hover:text-blue-800">
                            space link
                        </a>
                        <button 
                            class="inline-flex items-center ml-2 text-gray-600 transition-all transition-colors duration-75 duration-300 rounded hover:text-gray-800 group active:ring-2 active:ring-offset-2 active:ring-gray-300"
                            onclick="navigator.clipboard.writeText('{{ request.get_host }}{{ sender_path }}')"
                            title="Copy Link">
                            <img src="{% static 'images/icons/copy-link.svg' %}" alt="Copy Link Icon" class="w-4 h-4 transition-transform duration-300 group-hover:scale-110">
                        </button>
          
                    </div>
                </td>
                <td class="px-3 py-2">
                        {% render_sender_activate_toggle sender 'sender_toggle' sender.is_active  color_on="green" color_off="orange" toggle_color_on="marian-blue" toggle_color_off="gray" label_on="active" label_off="inactive" soft_off_label=False   label_colored=True label_wrap=True%}
                </td>
           
            {% for req in space.requests.all reversed%}
            <td class="px-3 py-2 {% if req.is_deleted is True %} bg-red-300-40  {% endif %}">
                <div class="">                  
                        <span class="flex-shrink-0 ml-1 text-center cursor-pointer hover:underline" title="number of uploaded files" data-modal-target="small-modal-{{forloop.counter0}}-{{sender.uuid}}" data-modal-toggle="small-modal-{{forloop.counter0}}-{{sender.uuid}}">
                            {% get_count_uploaded_files req sender %} files
                        </span> 
                         <!-- Small Modal -->
                        <div id="small-modal-{{forloop.counter0}}-{{sender.uuid}}" tabindex="-1" class="fixed top-0 left-0 right-0 z-50 hidden w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] max-h-full">
                            <div class="relative w-full max-w-md max-h-full">
                                <!-- Modal content -->
                                <div class="relative bg-white rounded-lg shadow dark:bg-gray-700">
                                    <!-- Modal header -->
                                    <div class="flex items-center justify-between p-4 border-b rounded-t md:p-5 dark:border-gray-600">
                                        <h3 class="text-xl font-medium text-gray-900 dark:text-white">
                                            Invitee: {{sender.email}} <br> Request: {{req.title}}
                                        </h3>
                                        <button type="button" class="inline-flex items-center justify-center w-8 h-8 text-sm text-gray-400 bg-transparent rounded-lg hover:bg-gray-200 hover:text-gray-900 ms-auto dark:hover:bg-gray-600 dark:hover:text-white" data-modal-hide="small-modal-{{forloop.counter0}}-{{sender.uuid}}">
                                            <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
                                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                                            </svg>
                                            <span class="sr-only">Close modal</span>
                                        </button>
                                    </div>
                                    <!-- Modal body -->
                                    <div class="p-4 space-y-4 md:p-5">
                                        <div class="mt-6 mb-6" hx-get="{% url 'filtered_upload_events' space.uuid sender.uuid req.uuid %}?hide_sender=True&hide_request=True" hx-trigger="intersect" hx-target="#history-table-{{forloop.counter0}}-{{sender.uuid}}" hx-indicator="#loading-indicator">
                                            <div class="flex items-center mb-3">
                                                <!-- Loading Indicator -->
                                                <div id="loading-indicator" class="items-center justify-center opacity-0 htmx-indicator">
                                                    <div role="status" class="ml-2 spinner">
                                                        {% include 'components/loading_spinner_light.html' with w="w-5" h="h-5" %}
                                                        <span class="sr-only">Loading...</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div id="history-table-{{forloop.counter0}}-{{sender.uuid}}">            
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                    </div>
            </td>
            {% endfor %}
</tr>