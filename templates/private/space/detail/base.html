{% extends "private/_base.html" %}
{% load static %}
{% load l10n %}
{% load i18n %}
{% block private_content %}
    <h2 class="bg-transparent text-gray-900 p-2.5 w-5/6 border-0 text-4xl font-bold">
        <label for="id_title" class="hidden">Space title</label>

        <input type="text" name="title" value="{{ space.title }}" placeholder="Spazio senza titolo*"
               hx-trigger="blur changed delay:500ms"
               hx-post="{% url 'space_edit' space.pk %}"
               class="bg-transparent text-gray-900 p-2.5 w-5/6 border-t-0 border-x-0 border-b border-b-black transition-all duration-300 text-4xl    hover:border-black #hover:text-4xl    focus:outline-none focus:ring-0 font-bold"
               required="" id="id_title">
        {% include 'private/space/components/space_actions_dropdown.html' with space=space space_num=0 %}

    </h2>
    <div class="border-b border-gray-200 dark:border-gray-700">
        <ul class="flex justify-center -mb-px text-medium font-medium text-center text-gray-500 dark:text-gray-400">
            <li class="me-2">
                <a href="{% url 'receiver_space_detail' space.pk %}"
                   class="inline-flex items-center justify-center p-4 {% if company_tab.detail %}text-blue-600  active border-blue-600{% else %}border-transparent hover:text-gray-600 hover:border-gray-300{% endif %} border-b-2  rounded-t-lg  group"
                   {% if company_tab.detail %}aria-current="page"{% endif %}>
                    <svg class="w-4 h-4 me-2 {% if company_tab.detail %}text-blue-600{% else %}text-gray-400  group-hover:text-gray-500{% endif %} dark:text-gray-500 dark:group-hover:text-gray-300"
                         aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10 0a10 10 0 1 0 10 10A10.011 10.011 0 0 0 10 0Zm0 5a3 3 0 1 1 0 6 3 3 0 0 1 0-6Zm0 13a8.949 8.949 0 0 1-4.951-1.488A3.987 3.987 0 0 1 9 13h2a3.987 3.987 0 0 1 3.951 3.512A8.949 8.949 0 0 1 10 18Z"/>
                    </svg>
                    {% translate 'Summary' %}
                </a>
            </li>
            <li class="me-2">
                <a href="{% url 'space_settings' space.pk %}"
                   class="inline-flex items-center justify-center p-4 {% if company_tab.spaces %}text-blue-600 active  border-blue-600{% else %}border-transparent hover:text-gray-600 hover:border-gray-300{% endif %} border-b-2 rounded-t-lg group"
                   {% if company_tab.spaces %}aria-current="page"{% endif %}>
                    <svg class="w-4 h-4 me-2 {% if company_tab.spaces %}text-blue-600{% else %}text-gray-400  group-hover:text-gray-500{% endif %} dark:text-blue-500 dark:group-hover:text-gray-300"
                         aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 18 18">
                        <path d="M6.143 0H1.857A1.857 1.857 0 0 0 0 1.857v4.286C0 7.169.831 8 1.857 8h4.286A1.857 1.857 0 0 0 8 6.143V1.857A1.857 1.857 0 0 0 6.143 0Zm10 0h-4.286A1.857 1.857 0 0 0 10 1.857v4.286C10 7.169 10.831 8 11.857 8h4.286A1.857 1.857 0 0 0 18 6.143V1.857A1.857 1.857 0 0 0 16.143 0Zm-10 10H1.857A1.857 1.857 0 0 0 0 11.857v4.286C0 17.169.831 18 1.857 18h4.286A1.857 1.857 0 0 0 8 16.143v-4.286A1.857 1.857 0 0 0 6.143 10Zm10 0h-4.286A1.857 1.857 0 0 0 10 11.857v4.286c0 1.026.831 1.857 1.857 1.857h4.286A1.857 1.857 0 0 0 18 16.143v-4.286A1.857 1.857 0 0 0 16.143 10Z"/>
                    </svg>
                    {% translate 'Settings' %}
                </a>
            </li>
            <li class="me-2">
                <a href="{% url 'upload_history' space.pk %}"
                   class="inline-flex items-center justify-center p-4 {% if company_tab.spaces %}text-blue-600 active  border-blue-600{% else %}border-transparent hover:text-gray-600 hover:border-gray-300{% endif %} border-b-2 rounded-t-lg group"
                   {% if company_tab.spaces %}aria-current="page"{% endif %}>
                    <svg class="w-4 h-4 me-2 {% if company_tab.spaces %}text-blue-600{% else %}text-gray-400  group-hover:text-gray-500{% endif %} dark:text-blue-500 dark:group-hover:text-gray-300"
                         aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 18 18">
                        <path d="M6.143 0H1.857A1.857 1.857 0 0 0 0 1.857v4.286C0 7.169.831 8 1.857 8h4.286A1.857 1.857 0 0 0 8 6.143V1.857A1.857 1.857 0 0 0 6.143 0Zm10 0h-4.286A1.857 1.857 0 0 0 10 1.857v4.286C10 7.169 10.831 8 11.857 8h4.286A1.857 1.857 0 0 0 18 6.143V1.857A1.857 1.857 0 0 0 16.143 0Zm-10 10H1.857A1.857 1.857 0 0 0 0 11.857v4.286C0 17.169.831 18 1.857 18h4.286A1.857 1.857 0 0 0 8 16.143v-4.286A1.857 1.857 0 0 0 6.143 10Zm10 0h-4.286A1.857 1.857 0 0 0 10 11.857v4.286c0 1.026.831 1.857 1.857 1.857h4.286A1.857 1.857 0 0 0 18 16.143v-4.286A1.857 1.857 0 0 0 16.143 10Z"/>
                    </svg>
                    {% translate 'Upload history' %}
                </a>
            </li>
            <li class="me-2">
                <a href="{% url 'senders' space.pk %}"
                   class="inline-flex items-center justify-center p-4 {% if company_tab.spaces %}text-blue-600 active  border-blue-600{% else %}border-transparent hover:text-gray-600 hover:border-gray-300{% endif %} border-b-2 rounded-t-lg group"
                   {% if company_tab.spaces %}aria-current="page"{% endif %}>
                    <svg class="w-4 h-4 me-2 {% if company_tab.spaces %}text-blue-600{% else %}text-gray-400  group-hover:text-gray-500{% endif %} dark:text-blue-500 dark:group-hover:text-gray-300"
                         aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 18 18">
                        <path d="M6.143 0H1.857A1.857 1.857 0 0 0 0 1.857v4.286C0 7.169.831 8 1.857 8h4.286A1.857 1.857 0 0 0 8 6.143V1.857A1.857 1.857 0 0 0 6.143 0Zm10 0h-4.286A1.857 1.857 0 0 0 10 1.857v4.286C10 7.169 10.831 8 11.857 8h4.286A1.857 1.857 0 0 0 18 6.143V1.857A1.857 1.857 0 0 0 16.143 0Zm-10 10H1.857A1.857 1.857 0 0 0 0 11.857v4.286C0 17.169.831 18 1.857 18h4.286A1.857 1.857 0 0 0 8 16.143v-4.286A1.857 1.857 0 0 0 6.143 10Zm10 0h-4.286A1.857 1.857 0 0 0 10 11.857v4.286c0 1.026.831 1.857 1.857 1.857h4.286A1.857 1.857 0 0 0 18 16.143v-4.286A1.857 1.857 0 0 0 16.143 10Z"/>
                    </svg>
                    {% translate 'Senders' %}
                </a>
            </li>
        </ul>
    </div>
    {% block space_content %}
        <!-- TITLE -->
        <form action="">
            {% csrf_token %}
            <div class="mt-2 mb-3">
                <div class="bg-transparent text-gray-900 p-2.5 w-4/6 border-0 text-4xl">
                    {{ form.instructions }}
                </div>

            </div>

        </form>


        <!-- DETAILS -->
        <div class="mb-6 mt-2 pl-2.5">
            {% block details %}
                <div hx-target="this">

                    <!-- created at-->
                    <div class="mb-2 text-base">
                        <span class="">Created at:</span>
                        <span class="inline-flex items-center bg-green-100 text-green-800 text-xs font-semibold px-2.5 py-0.5">
                <img src="{% static 'images/icons/calendar-green.svg' %}" alt="clock icon"
                     class="w-[13px] h-[13px] mr-1">
                            {% localize on %}
                                {{ space.created_at|date }}


                                </span>
                                <span class="inline-flex items-center bg-green-100 text-green-800 text-xs font-semibold px-2.5 py-0.5 ml-2">
                                <img src="{% static 'images/icons/clock-green.svg' %}" alt="clock icon"
                                     class="w-[13px] h-[13px] mr-1">
                                {{ space.created_at|time }}
                            {% endlocalize %}
                            </span>
                    </div>

                    {% if space.deadline %}
                        <!-- Deadline -->
                        <div class="mb-2 text-base">
                            <span class="">{% translate 'Deadline:' %}</span>
                            {% localize on %}
                                <span class="inline-flex items-center bg-blue-100 text-blue-800 text-xs font-semibold px-2.5 py-0.5">
                <img src="{% static 'images/icons/calendar-blue.svg' %}" alt="clock icon"
                     class="w-[13px] h-[13px] mr-1">
                {{ space.deadline|date }} 
            </span>
                                <span class="inline-flex items-center bg-blue-100 text-blue-800 text-xs font-semibold px-2.5 py-0.5 ml-2">
                <img src="{% static 'images/icons/clock-blue.svg' %}" alt="clock icon" class="w-[13px] h-[13px] mr-1">
                {{ space.deadline|time }}
            </span>
                            {% endlocalize %}
                            {% if space.deadline_expired %}
                                <span class="inline-flex items-center  bg-red-100 text-red-800 text-xs font-semibold px-2.5 py-0.5 ml-2">
                            {% translate 'Deadline expired!' %}
                </span>
                            {% endif %}
                            {% translate "To change this setting edit the space" as title %}
                            <span class="inline-flex items-center  bg-blue-100 text-blue-800 text-xs font-semibold px-2.5 py-0.5 ml-2"
                                  title=title></span>

                            {% if space.upload_after_deadline %}
                                {% translate 'Uploads allowed after the deadline' %}
                            {% else %}
                                {% translate 'Uploads forbidden after the deadline' %}
                            {% endif %}

                            {% with space.deadline_notification_datetime as deadline_notification_datetime %}
                                {% if deadline_notification_datetime %}
                                    {% translate "To change this setting edit the space" as title %}
                                    <span class="inline-flex items-center  bg-yellow-100 text-yellow-800 text-xs font-semibold px-2.5 py-0.5 ml-2"
                                          title=title>
           
                                  {% translate 'Notifications will be sent out on' %} {% localize on %}
                                        {{ deadline_notification_datetime|date }} {% translate 'at' %}
                                        {{ deadline_notification_datetime|time }}{% endlocalize %}
                         
                            </span>
                                {% endif %}
                            {% endwith %}
                        </div>
                    {% endif %}
                    <div class="mt-6 mb-6">
                        <div class="flex justify-between">
                            <h3 class="mb-3 text-2xl font-semibold">{% translate 'Request Summary' %}</h3>
                            {% url 'request_create' space.pk as request_create_url %}
                            {% translate 'Add request' as button_text %}
                            {% include "components/buttons/generic.html" with button_text=button_text href=request_create_url extra_classes="my-2"%}
                        </div>


                        {% include "private/space/detail/components/request_table.html" %}
                    </div>


                </div>
            {% endblock details %}


        </div>
    {% endblock space_content %}

{% endblock private_content %}

